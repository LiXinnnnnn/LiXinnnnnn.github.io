<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"><meta name="format-detection" content="telephone=no"><meta name="format-detection" content="email=no"><meta name="description" content="为了避免一切的结束,你拒绝了所有开始."><meta name="keywords" content="Hexo, Gruntjs, Nodejs, Reactjs, Vuejs"><title>shell脚本语言 - localhost</title><link rel="stylesheet" href="/css/main_style.min.css"><link rel="stylesheet" href="/css/my_style.css"><link rel="stylesheet" href="/css/link.css"><link rel="icon" href="/my_set_images/icon.ico"></head><body><div class="post-header"><img class="background" src="/default_images/post_background.jpg"><div class="post-title"><h1 class="title">shell脚本语言</h1><ul class="meta"><li><i class="icon icon-author"></i>lixin</li><li><i class="icon icon-clock"></i>9 Minutes</li><li><i class="icon icon-calendar"></i>2017年3月15日</li></ul></div></div><div class="article-content"><p>参考链接<a href="[http://c.biancheng.net/cpp/shell/|shell脚本教程]">http://c.biancheng.net/cpp/shell/|shell脚本教程</a></p>
<h1 id="shell脚本语言学习"><a href="#shell脚本语言学习" class="headerlink" title="shell脚本语言学习"></a>shell脚本语言学习</h1><h2 id="hello-world"><a href="#hello-world" class="headerlink" title="hello world"></a>hello world</h2><p>新建.sh文件，并给文件授权x权限。打开文件并在文件中输入以下代码\<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">echo &quot;Hello World !&quot;</div></pre></td></tr></table></figure></p>
<p>第一行表示用/bin/bash来编译执行此文件，第二行表示在窗口输出“hello world！”</p>
<h2 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h2><p>shell语言的语法和c语言类似，所以学起来还是比较容易理解。</p>
<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">i=1</div><div class="line">echo $i</div></pre></td></tr></table></figure>
<ul>
<li>变量定义用等于号，中间没有空格。</li>
<li>变量以大小写字母开头。</li>
<li>变量引用用${变量}，{}可省略，最好不要省略。<h2 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h2></li>
<li>表达式和运算符之间要有空格，例如 2+2 是不对的，必须写成 2 + 2</li>
<li>完整的表达式要被 <code> </code> 包含，注意这个字符不是常用的单引号，在 Esc 键下边</li>
<li>bash不支持简单的数学运算，但是可以通过其他命令来实现，例如 awk 和 expr，expr 最常用<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">val=`expr 2 + 2`</div><div class="line">echo &quot;Total value : $val&quot;</div></pre></td></tr></table></figure>
</li>
</ul>
<p><a href="http://c.biancheng.net/cpp/view/2736.html|shell运算符" target="_blank" rel="external">http://c.biancheng.net/cpp/view/2736.html|shell运算符</a></p>
<h2 id="常用数据类型"><a href="#常用数据类型" class="headerlink" title="常用数据类型"></a>常用数据类型</h2><h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><p>最好用双引号，里面可以直接引用变量。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"> your_name=&quot;qinjx&quot;</div><div class="line">greeting=&quot;hello, &quot;$your_name&quot; !&quot;</div></pre></td></tr></table></figure></p>
<h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><p>定义数组<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">array_name=(value0 value1 value2 value3)</div></pre></td></tr></table></figure></p>
<p>读取数组<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">NAME[0]=&quot;Zara&quot;</div></pre></td></tr></table></figure></p>
<p>换取数组长度<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">length=$&#123;#array_name[*]&#125;</div></pre></td></tr></table></figure></p>
<h2 id="常用语句"><a href="#常用语句" class="headerlink" title="常用语句"></a>常用语句</h2><h3 id="条件语句if"><a href="#条件语句if" class="headerlink" title="条件语句if"></a>条件语句if</h3><ul>
<li>if … fi 语句；</li>
<li>if … else … fi 语句；</li>
<li>if … elif … else … fi 语句。<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"> if [ expression ]</div><div class="line">then</div><div class="line">   Statement</div><div class="line">fi</div></pre></td></tr></table></figure>
</li>
</ul>
<p>注意：所有的[]和里面的表达式都需要空格[ $a == $b ]</p>
<h3 id="循环语句"><a href="#循环语句" class="headerlink" title="循环语句"></a>循环语句</h3><p>for循环<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"> for loop in 1 2 3 4 5</div><div class="line">do</div><div class="line">    echo &quot;The value is: $loop&quot;</div><div class="line">done</div></pre></td></tr></table></figure></p>
<p>while循环<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"> COUNTER=0</div><div class="line">while [ $COUNTER -lt 5 ]</div><div class="line">do</div><div class="line">    COUNTER=&apos;expr $COUNTER+1&apos;</div><div class="line">    echo $COUNTER</div><div class="line">done</div></pre></td></tr></table></figure></p>
<p>until循环<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">a=0</div><div class="line">until [ ! $a -lt 10 ]</div><div class="line">do</div><div class="line">   echo $a</div><div class="line">   a=`expr $a + 1`</div><div class="line">done</div></pre></td></tr></table></figure></p>
<p>跳出循环break，continue。这两个关键字后面可以跟数字，表示跳出基层循环。</p>
<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><p>函数定义<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Hello () &#123;</div><div class="line">   echo &quot;hello&quot;</div><div class="line">   return 1</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>函数调用，直接写函数名字就行。函数返回值在调用该函数后通过 $? 来获得<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Hello</div><div class="line">ret=$?</div></pre></td></tr></table></figure></p>
<p>函数参数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">funWithParam()&#123;</div><div class="line">    echo &quot;第一个参数 $1 !&quot;</div><div class="line">    echo &quot;第二个参数 $2 !&quot;</div><div class="line">    echo &quot;第十个参数 $10 !&quot;</div><div class="line">    echo &quot;参数个数 $# !&quot;  </div><div class="line">    echo &quot;传递给函数的所有参数 $* !&quot;  # 传递给函数的所有参数</div><div class="line">&#125;</div><div class="line">funWithParam 1 2 3 4 5 6 7 8 9 10</div></pre></td></tr></table></figure></p>
<h2 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h2><p>向文件中写 command &gt; file ，command为命令，file为文件。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">echo &quot;1&quot; &gt; users</div></pre></td></tr></table></figure></p>
<p>例子：定时删除多少天之前的文件<br>1、新建文件夹hello.sh并给予运行权限，并在其中输入以下代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">#！/bin/bash</div><div class="line">dir=/app/webContent/ems-admin/logs/</div><div class="line">find $&#123;dir&#125; -mtime +1 -type f|xargs rm -f</div></pre></td></tr></table></figure></p>
<p>${dir}为路径<br>-mtime +1 是设置时间为1天前<br>-type f表示删除的是文件<br>“|”为管道，连接一个命令的标准输出和另一个命令的标准输入。<br>xargs可以通过管道传递参数，作用是将参数列表转换成小块分段传递给其他命令。<br>2、建立定时任务<br>使用命令crontab -e编辑定时任务。加上以下代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">*/1 * * * * /app/test/shellcode/hello.sh</div></pre></td></tr></table></figure></p>
<p>每分钟运行一次hello.sh文件。</p>
<p>转载请注明出处 <a href="http://lixinnnnnn.github.io/2017/03/15/shell脚本语言/">http://lixinnnnnn.github.io/2017/03/15/shell脚本语言/</a> </p>
</div><div class="article-meta"><div class="tags"><i class="icon icon-tag"></i><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/shell/">shell</a><span class="tag-list-count">1</span></li></ul></div><div class="categories"><i class="icon icon-category"></i><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><span class="category-list-count">5</span></li></ul></div></div><div class="article-comment"><div class="ds-thread" id="ds-thread" data-thread-key="cj28bfbr7000e6gaqnyudnp2v" data-title="shell脚本语言" data-url="http://lixinnnnnn.github.io/2017/03/15/shell脚本语言/" site-name="newasdfasdf"></div><script>var siteName = document.getElementById('ds-thread').getAttribute('site-name');
var duoshuoQuery = {short_name: siteName};
(function() {
  var ds = document.createElement('script');
  ds.type = 'text/javascript';ds.async = true;
  ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
  ds.charset = 'UTF-8';
  (document.getElementsByTagName('head')[0] 
  || document.getElementsByTagName('body')[0]).appendChild(ds);
})();</script></div><ul class="navication"><li class="home"><a href="/"><i class="icon icon-home"></i></a></li><li><a href="/2016/12/29/整理下用过的js插件/"><i class="icon icon-arror-left"></i></a></li><li><a href="/2017/03/15/jdk安装/"><i class="icon icon-arror-right"></i></a></li></ul><div class="page-footer"><div class="top"><ul class="social"><li><a href="https://github.com/LiXinnnnnn" title="GitHub" target="_blank"><i class="icon icon-github"></i></a></li><li><a href="mailto:823523036@qq.com" title="Email" target="_blank"><i class="icon icon-email"></i></a></li><li><a href="http://www.justli.xyz/post_images/code.jpg" title="WeChat" target="_blank"><i class="icon icon-wechat"></i></a></li></ul></div><div class="bottom"><p class="copyright">© 2017 localhost<br><small>POWER BY <a href="https://hexo.io" target="_blank">HEXO</a></small><small>, THEME BY <a href="https://github.com/BoizZ/hexo-theme-laughing" target="_blank">LAUGHING</a></small></p></div></div></body></html>